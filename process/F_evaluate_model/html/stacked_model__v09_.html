<h1>Results from Stacked Model</h1><h3>Dataset Version: 09</h3>Date run: 2023-02-07 17:40:03.932194<br>Start time: 2023-02-07 15:40:05.305526<br>End time: 2023-02-07 17:40:03.932182<br><hr><h2>Results</h2><h3>Summary</h3>pickled new version of model
0.7246700333076852 is new best score (it's better than -999)<br><hr><h3>Tuned Models ranked by performance, with parameter details</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean_test_score</th>
      <th>mean_fit_time</th>
      <th>mean_score_time</th>
      <th>param_model__xgb1__tree_method</th>
      <th>param_model__xgb1__subsample</th>
      <th>param_model__xgb1__n_estimators</th>
      <th>param_model__xgb1__min_samples_leaf</th>
      <th>param_model__xgb1__max_samples</th>
      <th>param_model__xgb1__max_leaf_nodes</th>
      <th>param_model__xgb1__max_features</th>
      <th>param_model__xgb1__max_depth</th>
      <th>param_model__xgb1__learning_rate</th>
      <th>param_model__xgb1__lambda</th>
      <th>param_model__xgb1__colsample_bytree</th>
      <th>param_model__xgb1__booster</th>
      <th>param_model__n_jobs</th>
      <th>param_model__lgb1__num_leaves</th>
      <th>param_model__lgb1__num_iterations</th>
      <th>param_model__lgb1__n_estimators</th>
      <th>param_model__lgb1__min_child_samples</th>
      <th>param_model__lgb1__metric</th>
      <th>param_model__lgb1__learning_rate</th>
      <th>param_model__lgb1__is_unbalance</th>
      <th>param_model__lgb1__colsample_bytree</th>
      <th>param_model__lgb1__boosting_type</th>
      <th>param_model__knn1__weights</th>
      <th>param_model__knn1__p</th>
      <th>param_model__knn1__n_neighbors</th>
      <th>param_model__knn1__metric</th>
      <th>param_model__knn1__leaf_size</th>
      <th>params2</th>
    </tr>
    <tr>
      <th>rank_test_score</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.707063</td>
      <td>53.499804</td>
      <td>4.063652</td>
      <td>auto</td>
      <td>0.5</td>
      <td>50</td>
      <td>50</td>
      <td>0.9</td>
      <td>100</td>
      <td>None</td>
      <td>20</td>
      <td>0.1</td>
      <td>None</td>
      <td>0.9</td>
      <td>dart</td>
      <td>6</td>
      <td>20</td>
      <td>100</td>
      <td>132</td>
      <td>40</td>
      <td>auc</td>
      <td>0.5</td>
      <td>False</td>
      <td>0.6</td>
      <td>dart</td>
      <td>distance</td>
      <td>1</td>
      <td>11</td>
      <td>minkowski</td>
      <td>3</td>
      <td>auto/0.5/50/50/0.9/100/None/20/0.1/None/0.9/dart/6/20/100/132/40/auc/0.5/False/0.6/dart/distance/1/11/minkowski/3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.700886</td>
      <td>39.424163</td>
      <td>1.152978</td>
      <td>auto</td>
      <td>0.75</td>
      <td>50</td>
      <td>20</td>
      <td>0.75</td>
      <td>2</td>
      <td>16</td>
      <td>20</td>
      <td>0.1</td>
      <td>10</td>
      <td>1</td>
      <td>dart</td>
      <td>6</td>
      <td>10</td>
      <td>25</td>
      <td>132</td>
      <td>10</td>
      <td>auc</td>
      <td>0.05</td>
      <td>False</td>
      <td>0.6</td>
      <td>gbdt</td>
      <td>distance</td>
      <td>2</td>
      <td>9</td>
      <td>minkowski</td>
      <td>90</td>
      <td>auto/0.75/50/20/0.75/2/16/20/0.1/10/1/dart/6/10/25/132/10/auc/0.05/False/0.6/gbdt/distance/2/9/minkowski/90</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.699060</td>
      <td>60.428546</td>
      <td>4.448198</td>
      <td>auto</td>
      <td>0.75</td>
      <td>50</td>
      <td>50</td>
      <td>1</td>
      <td>2</td>
      <td>132</td>
      <td>20</td>
      <td>0.01</td>
      <td>0.5</td>
      <td>1</td>
      <td>dart</td>
      <td>6</td>
      <td>50</td>
      <td>200</td>
      <td>132</td>
      <td>20</td>
      <td>auc</td>
      <td>0.5</td>
      <td>False</td>
      <td>0.6</td>
      <td>dart</td>
      <td>distance</td>
      <td>1</td>
      <td>7</td>
      <td>minkowski</td>
      <td>180</td>
      <td>auto/0.75/50/50/1/2/132/20/0.01/0.5/1/dart/6/50/200/132/20/auc/0.5/False/0.6/dart/distance/1/7/minkowski/180</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.690123</td>
      <td>27.828040</td>
      <td>1.520098</td>
      <td>auto</td>
      <td>0.75</td>
      <td>50</td>
      <td>20</td>
      <td>0.9</td>
      <td>2</td>
      <td>None</td>
      <td>10</td>
      <td>0.1</td>
      <td>0.5</td>
      <td>1</td>
      <td>dart</td>
      <td>6</td>
      <td>50</td>
      <td>25</td>
      <td>264</td>
      <td>40</td>
      <td>auc</td>
      <td>0.05</td>
      <td>False</td>
      <td>0.6</td>
      <td>gbdt</td>
      <td>distance</td>
      <td>2</td>
      <td>7</td>
      <td>minkowski</td>
      <td>30</td>
      <td>auto/0.75/50/20/0.9/2/None/10/0.1/0.5/1/dart/6/50/25/264/40/auc/0.05/False/0.6/gbdt/distance/2/7/minkowski/30</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.689586</td>
      <td>31.753468</td>
      <td>4.447608</td>
      <td>auto</td>
      <td>0.5</td>
      <td>50</td>
      <td>20</td>
      <td>1</td>
      <td>2</td>
      <td>None</td>
      <td>10</td>
      <td>0.01</td>
      <td>0.5</td>
      <td>0.75</td>
      <td>dart</td>
      <td>6</td>
      <td>50</td>
      <td>100</td>
      <td>64</td>
      <td>20</td>
      <td>auc</td>
      <td>0.5</td>
      <td>True</td>
      <td>0.6</td>
      <td>gbdt</td>
      <td>distance</td>
      <td>1</td>
      <td>11</td>
      <td>minkowski</td>
      <td>3</td>
      <td>auto/0.5/50/20/1/2/None/10/0.01/0.5/0.75/dart/6/50/100/64/20/auc/0.5/True/0.6/gbdt/distance/1/11/minkowski/3</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.687959</td>
      <td>29.293213</td>
      <td>1.500128</td>
      <td>auto</td>
      <td>0.9</td>
      <td>50</td>
      <td>50</td>
      <td>1</td>
      <td>100</td>
      <td>None</td>
      <td>10</td>
      <td>0.1</td>
      <td>10</td>
      <td>1</td>
      <td>dart</td>
      <td>6</td>
      <td>50</td>
      <td>100</td>
      <td>264</td>
      <td>40</td>
      <td>auc</td>
      <td>0.5</td>
      <td>True</td>
      <td>0.6</td>
      <td>dart</td>
      <td>distance</td>
      <td>2</td>
      <td>7</td>
      <td>minkowski</td>
      <td>30</td>
      <td>auto/0.9/50/50/1/100/None/10/0.1/10/1/dart/6/50/100/264/40/auc/0.5/True/0.6/dart/distance/2/7/minkowski/30</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.687053</td>
      <td>24.852183</td>
      <td>1.257205</td>
      <td>auto</td>
      <td>0.9</td>
      <td>50</td>
      <td>20</td>
      <td>0.75</td>
      <td>2</td>
      <td>132</td>
      <td>10</td>
      <td>0.01</td>
      <td>None</td>
      <td>0.9</td>
      <td>dart</td>
      <td>6</td>
      <td>50</td>
      <td>100</td>
      <td>64</td>
      <td>20</td>
      <td>auc</td>
      <td>0.5</td>
      <td>False</td>
      <td>0.6</td>
      <td>gbdt</td>
      <td>distance</td>
      <td>2</td>
      <td>7</td>
      <td>minkowski</td>
      <td>90</td>
      <td>auto/0.9/50/20/0.75/2/132/10/0.01/None/0.9/dart/6/50/100/64/20/auc/0.5/False/0.6/gbdt/distance/2/7/minkowski/90</td>
    </tr>
  </tbody>
</table><hr><h3>Best and worst models obtained by tuning</h3><img src="../artifacts/stacked_model__v09__best_and_worst.png"/><hr><h3>Best Model: Comparing model predictions to actual property values</h3><img src="../artifacts/stacked_model__v09__best_model_correlation.png"/><hr><h2>Comparison with other models</h2><h3>Comparison with version 09 performances</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>best score</th>
      <th>best time</th>
      <th>Mean Absolute Error Accuracy</th>
      <th>Mean Squared Error Accuracy</th>
      <th>R square Accuracy</th>
      <th>Root Mean Squared Error</th>
      <th>best run date</th>
      <th>best method</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>stacked model (v09)</th>
      <td>0.72467</td>
      <td>41.644933</td>
      <td>42158.162105</td>
      <td>3110238985.523252</td>
      <td>0.72467</td>
      <td>55769.516633</td>
      <td>2023-02-07 17:40:03.460831</td>
      <td>random search</td>
    </tr>
  </tbody>
</table><hr><h3>Comparison with all model performances</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>best score</th>
      <th>best time</th>
      <th>Mean Absolute Error Accuracy</th>
      <th>Mean Squared Error Accuracy</th>
      <th>R square Accuracy</th>
      <th>Root Mean Squared Error</th>
      <th>best run date</th>
      <th>best method</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>stacked model (v09)</th>
      <td>0.72467</td>
      <td>41.644933</td>
      <td>42158.162105</td>
      <td>3110238985.523252</td>
      <td>0.72467</td>
      <td>55769.516633</td>
      <td>2023-02-07 17:40:03.460831</td>
      <td>random search</td>
    </tr>
  </tbody>
</table><hr><h2>Appendix</h2><h3>Data Sample</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>nearestStation</th>
      <th>location.latitude</th>
      <th>location.longitude</th>
      <th>latitude_deviation</th>
      <th>longitude_deviation</th>
      <th>tenure.tenureType</th>
      <th>feature__balcony</th>
      <th>feature__chain free</th>
      <th>feature__no onward chain</th>
      <th>feature__off street parking</th>
      <th>feature__one bedroom</th>
      <th>feature__private balcony</th>
      <th>feature__share of freehold</th>
      <th>feature__three bedrooms</th>
      <th>feature__two bedrooms</th>
      <th>feature__two double bedrooms</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>14520525</th>
      <td>550000.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>0.274316</td>
      <td>51.529950</td>
      <td>-0.207020</td>
      <td>0.030230</td>
      <td>0.102600</td>
      <td>LEASEHOLD</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>27953107</th>
      <td>400000.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>0.305845</td>
      <td>51.549390</td>
      <td>-0.482600</td>
      <td>0.049670</td>
      <td>0.378180</td>
      <td>LEASEHOLD</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>33593487</th>
      <td>579950.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>0.438045</td>
      <td>51.447180</td>
      <td>-0.338770</td>
      <td>0.052540</td>
      <td>0.234350</td>
      <td>FREEHOLD</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>35271294</th>
      <td>370000.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>0.399307</td>
      <td>51.449568</td>
      <td>-0.140154</td>
      <td>0.050152</td>
      <td>0.035734</td>
      <td>LEASEHOLD</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>44749111</th>
      <td>475000.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>0.410550</td>
      <td>51.370050</td>
      <td>-0.212410</td>
      <td>0.129670</td>
      <td>0.107990</td>
      <td>FREEHOLD</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table><hr><h3>Hyperparameter options for Randomized Grid Search</h3>{'model__n_jobs': [6], 'model__xgb1__tree_method': ['auto'], 'model__xgb1__subsample': [0.5, 0.75, 0.9], 'model__xgb1__n_estimators': [50, 100], 'model__xgb1__min_samples_leaf': [20, 50], 'model__xgb1__max_samples': [1, 0.75, 0.9], 'model__xgb1__max_leaf_nodes': [2, 20, 100], 'model__xgb1__max_features': [None, 16, 64, 132], 'model__xgb1__max_depth': [10, 20], 'model__xgb1__learning_rate': [0.01, 0.1, 1], 'model__xgb1__lambda': [None, 0.5, 1, 10], 'model__xgb1__colsample_bytree': [1, 0.75, 0.9], 'model__xgb1__booster': ['dart'], 'model__lgb1__num_leaves': [10, 20, 50], 'model__lgb1__num_iterations': [25, 50, 100, 200], 'model__lgb1__n_estimators': [64, 132, 264], 'model__lgb1__min_child_samples': [10, 20, 40], 'model__lgb1__metric': ['auc'], 'model__lgb1__learning_rate': [0.05, 0.5], 'model__lgb1__is_unbalance': [True, False], 'model__lgb1__colsample_bytree': [0.6], 'model__lgb1__boosting_type': ['gbdt', 'dart'], 'model__knn1__weights': ['distance'], 'model__knn1__p': [1, 2], 'model__knn1__n_neighbors': [7, 9, 11], 'model__knn1__metric': ['minkowski'], 'model__knn1__leaf_size': [3, 30, 60, 90, 180]}
<hr><h3>Range of hyperparameter results</h3><img src="../artifacts/stacked_model__v09__evolution_of_models_fig.png"/><hr><h3>Environment Variables</h3>{'notebook_environment': 'gradient', 'use_gpu': True, 'debug_mode': False, 'quick_mode': False, 'quick_override_cv_splits': 2, 'quick_override_n_iter': 10, 'quick_override_n_jobs': 3}
<hr>